import{A as k}from"./AuthenticatedLayout-Di-2FOMO.js";import{a as c,o as S,b as u,d as m,e as s,u as C,w as l,F as f,Z as V,f as e,g as h,i as $,t as g,k as N}from"./vue.m-BoM48gZa.js";import{_ as P}from"./Pagination-lRXMoJjk.js";import{_ as b}from"./CancelButton-CYN4UORr.js";import{_ as z}from"./DeleteButton-CmFOYZ2N.js";import{_ as B}from"./SearchInput-BKr-ujZ-.js";import{R as L}from"./ResponsiveTable-D6b5B55q.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BaseButton-CVzmqfRt.js";import"./TextInput-lN6ApOBV.js";const M=e("h2",{class:"font-semibold text-indigo-50 leading-tight"},"店舗管理",-1),A={class:"py-3 sm:py-6"},D={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},F={class:"text-right mb-3"},R={class:"bg-white overflow-hidden shadow-sm"},T={class:"p-5 sm:p-10 text-gray-900"},q={class:"bg-white w-full text-sm"},E=e("thead",{class:"bg-indigo-600 text-white text-xs"},[e("tr",null,[e("th",{class:"border border-gray-300 p-2 font-bold"},"店舗名"),e("th",{class:"border border-gray-300 p-2 font-bold"},"メールアドレス"),e("th",{class:"border border-gray-300 p-2 font-bold text-nowrap w-1"},"操作")])],-1),I={class:"border border-gray-300 p-2"},U={class:"border border-gray-300 p-2"},Z=["href"],j={class:"border border-gray-300 p-2 text-nowrap"},G={key:0},H=e("td",{class:"border border-gray-300 p-4 text-center",colspan:"3"},"データがありません。",-1),J=[H],re={__name:"Index",setup(K){const _=c([]),p=c({});S(()=>{n()});const n=()=>{const o=d.value,a=route("admin.shop.list",{page:o}),t={params:{q:i.value.keyword}};axios.get(a,t).then(r=>{_.value=r.data.data,p.value=r.data.links})},v=o=>{d.value=o,n()},x=o=>{const a=route("admin.shop.destroy",o.id);Swal.confirm("delete").then(t=>{t.isConfirmed&&axios.delete(a).then(r=>{r.data.result===!0&&(Swal.fire("削除しました","選択した店舗を削除しました。","success"),location.reload())}).catch(r=>{Swal.fire("エラーが発生しました","削除に失敗しました。","error")})})},d=c(1),i=c({keyword:""}),y=()=>{d.value=1,n()},w=()=>{i.value.keyword="",d.value=1,n()};return(o,a)=>(u(),m(f,null,[s(C(V),{title:"店舗管理"}),s(k,null,{header:l(()=>[M]),default:l(()=>[e("div",A,[e("div",D,[e("div",F,[s(b,{size:"xs",href:o.route("admin.shop.input")},{default:l(()=>[h("新規登録")]),_:1},8,["href"])]),e("div",R,[e("div",T,[s(B,{modelValue:i.value.keyword,"onUpdate:modelValue":a[0]||(a[0]=t=>i.value.keyword=t),placeholder:"店舗名・メールアドレス",onSearch:y,onClear:w},null,8,["modelValue"]),s(L,{class:"mb-4"},{default:l(()=>[e("table",q,[E,e("tbody",null,[(u(!0),m(f,null,$(_.value,t=>(u(),m("tr",{key:t.id,class:"odd:bg-gray-50 hover:bg-indigo-100"},[e("td",I,g(t.name),1),e("td",U,[e("a",{class:"underline",href:`mailto:${t.email}`},g(t.email),9,Z)]),e("td",j,[s(b,{size:"xs",class:"mr-2",href:o.route("admin.shop.input",t.id)},{default:l(()=>[h("編集")]),_:2},1032,["href"]),s(z,{size:"xs",onClick:r=>x(t)},{default:l(()=>[h("削除")]),_:2},1032,["onClick"])])]))),128)),_.value.length===0?(u(),m("tr",G,J)):N("",!0)])])]),_:1}),s(P,{links:p.value,onMovePage:v},null,8,["links"])])])])])]),_:1})],64))}};export{re as default};
