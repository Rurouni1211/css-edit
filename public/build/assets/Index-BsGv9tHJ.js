import{A as $}from"./AuthenticatedLayout-Di-2FOMO.js";import{a as u,o as V,b as p,d as h,e as s,u as S,w as n,F as g,Z as z,f as e,g as d,i as D,t as i,k as E}from"./vue.m-BoM48gZa.js";import{_ as L}from"./Pagination-lRXMoJjk.js";import{_ as x,a as N}from"./CancelButton-CYN4UORr.js";import{_ as P}from"./DeleteButton-CmFOYZ2N.js";import{_ as B}from"./SubButton-BQXSgC_f.js";import{_ as M}from"./SearchInput-BKr-ujZ-.js";import{R as T}from"./ResponsiveTable-D6b5B55q.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BaseButton-CVzmqfRt.js";import"./TextInput-lN6ApOBV.js";const A=e("h2",{class:"font-semibold text-indigo-50 leading-tight"},[d("商品管理"),e("small",null,"（完成品）")],-1),F={class:"py-3 sm:py-6"},I={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},R={class:"text-right mb-3"},q={class:"bg-white overflow-hidden shadow-sm mb-4"},U={class:"p-5 sm:p-10 text-gray-900"},Z={class:"bg-white w-full text-sm"},j=e("thead",{class:"bg-indigo-600 text-white text-xs"},[e("tr",null,[e("th",{class:"border border-gray-300 p-2 text-nowrap font-bold"},[d("商品名"),e("small",null,"（商品コード）")]),e("th",{class:"border border-gray-300 p-2 text-nowrap font-bold"},"カテゴリ"),e("th",{class:"border border-gray-300 p-2 text-nowrap font-bold"},"店舗"),e("th",{class:"border border-gray-300 p-2 text-nowrap font-bold"},"画像"),e("th",{class:"border border-gray-300 p-2 text-nowrap font-bold w-1"},"表示"),e("th",{class:"border border-gray-300 p-2 text-nowrap font-bold w-1"},"複製"),e("th",{class:"border border-gray-300 p-2 text-nowrap font-bold w-1"},"操作")])],-1),G={class:"border border-gray-300 p-2 min-w-60"},H={class:"text-xs text-gray-600 mb-0.5"},J={class:"border border-gray-300 p-2"},K={class:"border border-gray-300 p-2"},O={class:"border border-gray-300 p-2 text-center"},Q={class:"border border-gray-300 p-2 text-nowrap"},W={class:"border border-gray-300 p-2 text-nowrap"},X={class:"border border-gray-300 p-2 text-nowrap"},Y={key:0},ee=e("td",{class:"border border-gray-300 p-4 text-center",colspan:"7"},"データがありません。",-1),te=[ee],pe={__name:"Index",setup(oe){const c=u([]),b=u({});V(()=>{l()});const l=()=>{const o=m.value;c.value=[],b.value={};const a=route("admin.item.list",{page:o}),t={params:{q:_.value.keyword}};axios.get(a,t).then(r=>{c.value=r.data.data,b.value=r.data.meta.links})},y=o=>{m.value=o,l()},w=o=>{const a=`「${o.name}」を複製しますか？`;Swal.confirm("normal",a).then(t=>{if(t.isConfirmed){const r=route("admin.item.duplicate",{item:o.id});axios.post(r).then(f=>{f.data.result===!0&&l()})}})},v=o=>{Swal.confirm("delete").then(a=>{if(a.isConfirmed){const t=route("admin.item.destroy",{item:o.id}),r={_method:"DELETE"};axios.post(t,r).then(f=>{f.data.result===!0&&l()})}})},m=u(1),_=u({keyword:""}),k=()=>{m.value=1,l()},C=()=>{_.value.keyword="",m.value=1,l()};return(o,a)=>(p(),h(g,null,[s(S(z),{title:"商品管理（完成品）"}),s($,null,{header:n(()=>[A]),default:n(()=>[e("div",F,[e("div",I,[e("div",R,[s(x,{size:"xs",href:o.route("admin.item.input")},{default:n(()=>[d("新規登録")]),_:1},8,["href"])]),e("div",q,[e("div",U,[s(M,{modelValue:_.value.keyword,"onUpdate:modelValue":a[0]||(a[0]=t=>_.value.keyword=t),placeholder:"商品名、商品コード",onSearch:k,onClear:C},null,8,["modelValue"]),s(T,{class:"mb-4"},{default:n(()=>[e("table",Z,[j,e("tbody",null,[(p(!0),h(g,null,D(c.value,t=>(p(),h("tr",{key:t.id,class:"odd:bg-gray-50 hover:bg-indigo-100"},[e("td",G,[e("div",H,i(t.item_code),1),e("div",null,i(t.name),1)]),e("td",J,i(t.category.name),1),e("td",K,i(t.shop.name),1),e("td",O,i(t.images.length)+"枚",1),e("td",Q,[s(B,{size:"xs",href:t.detail_url,target:"_blank"},{default:n(()=>[d("確認")]),_:2},1032,["href"])]),e("td",W,[s(N,{size:"xs",class:"mr-1",onClick:r=>w(t)},{default:n(()=>[d("複製")]),_:2},1032,["onClick"])]),e("td",X,[s(x,{size:"xs",class:"mr-1",href:o.route("admin.item.input",t.id)},{default:n(()=>[d("編集")]),_:2},1032,["href"]),s(P,{size:"xs",onClick:r=>v(t)},{default:n(()=>[d("削除")]),_:2},1032,["onClick"])])]))),128)),c.value.length===0?(p(),h("tr",Y,te)):E("",!0)])])]),_:1}),s(L,{links:b.value,onMovePage:y},null,8,["links"])])])])])]),_:1})],64))}};export{pe as default};
