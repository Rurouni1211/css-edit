import{A as k}from"./AuthenticatedLayout-Di-2FOMO.js";import{a as c,o as C,b as u,d as m,e as s,u as S,w as r,F as f,Z as V,f as e,g as h,i as $,t as g,k as N}from"./vue.m-BoM48gZa.js";import{_ as P}from"./Pagination-lRXMoJjk.js";import{_ as b}from"./CancelButton-CYN4UORr.js";import{_ as z}from"./DeleteButton-CmFOYZ2N.js";import{_ as A}from"./SearchInput-BKr-ujZ-.js";import{R as B}from"./ResponsiveTable-D6b5B55q.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BaseButton-CVzmqfRt.js";import"./TextInput-lN6ApOBV.js";const L=e("h2",{class:"font-semibold text-indigo-50 leading-tight"},"職人管理",-1),M={class:"py-3 sm:py-6"},D={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},F={class:"text-right mb-3"},R={class:"bg-white overflow-hidden shadow-sm"},T={class:"p-5 sm:p-10 text-gray-900"},q={class:"bg-white w-full text-sm"},E=e("thead",{class:"bg-indigo-600 text-white text-xs"},[e("tr",null,[e("th",{class:"border border-gray-300 p-2 text-nowrap font-bold"},"店舗名"),e("th",{class:"border border-gray-300 p-2 text-nowrap font-bold"},"メールアドレス"),e("th",{class:"border border-gray-300 p-2 text-nowrap font-bold w-1"},"操作")])],-1),I={class:"border border-gray-300 p-2 text-nowrap"},U={class:"border border-gray-300 p-2 text-nowrap"},Z=["href"],j={class:"border border-gray-300 p-2 text-nowrap"},G={key:0},H=e("td",{class:"border border-gray-300 p-4 text-center",colspan:"3"},"データがありません。",-1),J=[H],re={__name:"Index",setup(K){const _=c([]),p=c({});C(()=>{l()});const l=()=>{const o=d.value,a=route("admin.artisan.list",{page:o}),t={params:{q:i.value.keyword}};axios.get(a,t).then(n=>{_.value=n.data.data,p.value=n.data.links})},x=o=>{d.value=o,l()},v=o=>{const a=route("admin.artisan.destroy",o.id);Swal.confirm("delete").then(t=>{t.isConfirmed&&axios.delete(a).then(n=>{n.data.result===!0&&(Swal.fire("削除しました","選択した店舗を削除しました。","success"),location.reload())}).catch(()=>{Swal.fire("エラーが発生しました","削除に失敗しました。","error")})})},d=c(1),i=c({keyword:""}),w=()=>{d.value=1,l()},y=()=>{i.value.keyword="",d.value=1,l()};return(o,a)=>(u(),m(f,null,[s(S(V),{title:"職人管理"}),s(k,null,{header:r(()=>[L]),default:r(()=>[e("div",M,[e("div",D,[e("div",F,[s(b,{size:"xs",href:o.route("admin.shop.input")},{default:r(()=>[h("新規登録")]),_:1},8,["href"])]),e("div",R,[e("div",T,[s(A,{modelValue:i.value.keyword,"onUpdate:modelValue":a[0]||(a[0]=t=>i.value.keyword=t),placeholder:"職人名・メールアドレス",onSearch:w,onClear:y},null,8,["modelValue"]),s(B,{class:"mb-4"},{default:r(()=>[e("table",q,[E,e("tbody",null,[(u(!0),m(f,null,$(_.value,t=>(u(),m("tr",{key:t.id,class:"odd:bg-gray-50 hover:bg-indigo-100"},[e("td",I,g(t.name),1),e("td",U,[e("a",{class:"underline",href:`mailto:${t.email}`},g(t.email),9,Z)]),e("td",j,[s(b,{size:"xs",class:"mr-2",href:o.route("admin.artisan.input",t.id)},{default:r(()=>[h("編集")]),_:2},1032,["href"]),s(z,{size:"xs",onClick:n=>v(t)},{default:r(()=>[h("削除")]),_:2},1032,["onClick"])])]))),128)),_.value.length===0?(u(),m("tr",G,J)):N("",!0)])])]),_:1}),s(P,{links:p.value,onMovePage:x},null,8,["links"])])])])])]),_:1})],64))}};export{re as default};
