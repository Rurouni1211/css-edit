import{l as _,a as w,o as B,b as d,d as u,e as s,u as N,w as m,F as P,Z as S,f as a,m as b,v as k,k as h,n as $,t as T,g as E,O}from"./vue.m-BoM48gZa.js";import{A}from"./AuthenticatedLayout-Di-2FOMO.js";import{_ as c}from"./InputError-siFCQWKO.js";import{_ as p}from"./TextInput-lN6ApOBV.js";import{_ as f}from"./InputLabel-fjeUReQI.js";import{L as D}from"./LoadingModal-BiCFBVY5.js";import{g as F}from"./Ajax-ltBwR52q.js";import{g as V}from"./Password-BEAIegNW.js";import{_ as j}from"./FooterButtons-DwrU-TYt.js";import{_ as z}from"./SubButton-BQXSgC_f.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./CancelButton-CYN4UORr.js";import"./BaseButton-CVzmqfRt.js";const I=a("h2",{class:"font-semibold text-indigo-50 leading-tight"},"職人追加・編集",-1),R={class:"sm:py-6"},Y={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Z={class:"bg-white overflow-hidden shadow-sm"},q={class:"p-5 sm:p-10 text-gray-900"},G={class:"mb-5"},H={class:"mb-5"},J={key:0,class:"mb-5"},K=a("span",{class:"text-sm"}," パスワードを変更する ",-1),Q={key:1,class:"mt-6"},W={class:"mb-5"},X={class:"flex"},ee={class:"flex-grow pl-5"},ae={class:"mb-5"},se=a("span",{class:"text-sm"}," 新しい認証情報を店舗にメール送信する ",-1),te={key:0},we={__name:"Input",props:{artisan:{type:Object,default(){return{}}},passwordLength:{type:Number,default:16}},setup(y){const n=y,C=_(()=>n.artisan.id===void 0),g=_(()=>n.artisan.id!==void 0),r=w(!1);B(()=>{n.artisan.id&&(e.value.name=n.artisan.name,e.value.email=n.artisan.email,e.value.has_password=!1)});const e=w({name:"",email:"",password:"",password_confirmation:"",has_notification:!0,has_password:!0}),i=w({}),M=()=>{let l="",t={};g.value?(l=route("admin.artisan.update",{artisan:n.artisan.id}),t={_method:"PUT",...e.value}):(l=route("admin.artisan.store"),t=e.value),Swal.fire({title:"保存",text:"保存します。よろしいですか？",icon:"warning",showCancelButton:!0,confirmButtonText:"保存",cancelButtonText:"キャンセル"}).then(o=>{o.isConfirmed&&(r.value=!0,axios.post(l,t).then(v=>{v.data.result===!0&&Swal.fire({title:"保存しました",icon:"success"}).then(()=>{C.value===!0&&location.reload()})}).catch(v=>{i.value=F(v)}).finally(()=>r.value=!1))})},L=()=>{const l=V(n.passwordLength);e.value.password=l,e.value.password_confirmation=l,Swal.fire({title:"パスワードを自動生成しました",text:"「"+l+"」",icon:"info"})},U=_(()=>V(n.passwordLength)),x=()=>{O.visit(route("admin.artisan.index"))};return(l,t)=>(d(),u(P,null,[s(N(S),{title:"職人追加・編集"}),s(A,null,{header:m(()=>[I]),default:m(()=>[a("div",R,[a("div",Y,[a("div",Z,[a("div",q,[a("div",G,[s(f,{value:"店舗名"}),s(p,{type:"text",class:"mt-1 block w-full sm:w-96",modelValue:e.value.name,"onUpdate:modelValue":t[0]||(t[0]=o=>e.value.name=o),autocomplete:"name"},null,8,["modelValue"]),s(c,{message:i.value.name},null,8,["message"])]),a("div",H,[s(f,{value:"メールアドレス"}),s(p,{type:"text",class:"mt-1 block w-full sm:w-96",modelValue:e.value.email,"onUpdate:modelValue":t[1]||(t[1]=o=>e.value.email=o),autocomplete:"email"},null,8,["modelValue"]),s(c,{message:i.value.email},null,8,["message"])]),g.value?(d(),u("div",J,[a("label",null,[b(a("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=o=>e.value.has_password=o),class:"mr-1"},null,512),[[k,e.value.has_password]]),K])])):h("",!0),e.value.has_password?(d(),u("div",Q,[a("div",W,[a("div",X,[s(f,{value:"パスワード",class:"mr-3"}),a("div",ee,[a("a",{class:"text-indigo-500 hover:underline text-sm",href:"#",onClick:$(L,["prevent"])},"自動生成する")])]),s(p,{type:"password",class:"mt-1 block w-96",modelValue:e.value.password,"onUpdate:modelValue":t[3]||(t[3]=o=>e.value.password=o),autocomplete:"email"},null,8,["modelValue"]),s(c,{message:i.value.password},null,8,["message"]),a("small",null," 例： "+T(U.value),1)]),a("div",ae,[s(f,{value:"パスワード（確認）",class:"mr-1"}),s(p,{type:"password",class:"mt-1 block w-96",modelValue:e.value.password_confirmation,"onUpdate:modelValue":t[4]||(t[4]=o=>e.value.password_confirmation=o),autocomplete:"email"},null,8,["modelValue"]),s(c,{message:i.value.password},null,8,["message"])]),a("div",null,[a("label",null,[b(a("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=o=>e.value.has_notification=o),class:"mr-1"},null,512),[[k,e.value.has_notification]]),se])])])):h("",!0)])])])]),s(j,{onYesClick:M,onNoClick:x},{left:m(()=>[s(z,{size:"md",href:l.route("admin.artisan.input"),onClick:x},{default:m(()=>[E("新規追加")]),_:1},8,["href"])]),_:1}),r.value?(d(),u("div",te,[s(D,{show:r.value},null,8,["show"])])):h("",!0)]),_:1})],64))}};export{we as default};
