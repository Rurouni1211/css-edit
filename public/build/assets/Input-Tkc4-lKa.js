import{l as _,a as h,o as B,b as r,d as u,e as a,u as N,w as m,F as P,Z as S,f as e,m as b,v as k,k as w,n as $,t as T,g as E,O}from"./vue.m-BoM48gZa.js";import{A}from"./AuthenticatedLayout-Di-2FOMO.js";import{_ as p}from"./InputError-siFCQWKO.js";import{_ as c}from"./TextInput-lN6ApOBV.js";import{_ as v}from"./InputLabel-fjeUReQI.js";import{L as D}from"./LoadingModal-BiCFBVY5.js";import{g as F}from"./Ajax-ltBwR52q.js";import{g as V}from"./Password-BEAIegNW.js";import{_ as j}from"./FooterButtons-DwrU-TYt.js";import{_ as z}from"./SubButton-BQXSgC_f.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./CancelButton-CYN4UORr.js";import"./BaseButton-CVzmqfRt.js";const I=e("h2",{class:"font-semibold text-indigo-50 leading-tight"},"店舗追加・編集",-1),R={class:"sm:py-6"},Y={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Z={class:"bg-white overflow-hidden shadow-sm"},q={class:"p-5 sm:p-10 text-gray-900"},G={class:"mb-5"},H={class:"mb-5"},J={key:0},K=e("span",{class:"text-sm"}," パスワードを変更する ",-1),Q={key:1,class:"mt-6"},W={class:"mb-5"},X={class:"flex"},ee={class:"flex-grow pl-5"},se={class:"mb-5"},ae=e("span",{class:"text-sm"}," 新しい認証情報を店舗にメール送信する ",-1),oe={key:0},he={__name:"Input",props:{shop:{type:Object,default(){return{}}},passwordLength:{type:Number,default:16}},setup(y){const n=y,C=_(()=>!n.shop.id),g=_(()=>n.shop.id),d=h(!1);B(()=>{n.shop.id&&(s.value.name=n.shop.name,s.value.email=n.shop.email,s.value.has_password=!1)});const s=h({name:"",email:"",password:"",password_confirmation:"",has_notification:!0,has_password:!0}),i=h({}),M=()=>{let l="",o={};g.value?(l=route("admin.shop.update",{shop:n.shop.id}),o={_method:"PUT",...s.value}):(l=route("admin.shop.store"),o=s.value),Swal.fire({title:"保存",text:"保存します。よろしいですか？",icon:"warning",showCancelButton:!0,confirmButtonText:"保存",cancelButtonText:"キャンセル"}).then(t=>{t.isConfirmed&&(d.value=!0,axios.post(l,o).then(f=>{f.data.result===!0&&Swal.fire({title:"保存しました",icon:"success"}).then(()=>{C.value===!0&&location.reload()})}).catch(f=>{i.value=F(f)}).finally(()=>d.value=!1))})},L=()=>{const l=V(n.passwordLength);s.value.password=l,s.value.password_confirmation=l,Swal.fire({title:"パスワードを自動生成しました",text:"「"+l+"」",icon:"info"})},U=_(()=>V(n.passwordLength)),x=()=>{O.visit(route("admin.shop.index"))};return(l,o)=>(r(),u(P,null,[a(N(S),{title:"店舗追加・編集"}),a(A,null,{header:m(()=>[I]),default:m(()=>[e("div",R,[e("div",Y,[e("div",Z,[e("div",q,[e("div",G,[a(v,{value:"店舗名"}),a(c,{type:"text",class:"mt-1 block w-full sm:w-96",modelValue:s.value.name,"onUpdate:modelValue":o[0]||(o[0]=t=>s.value.name=t),autocomplete:"name"},null,8,["modelValue"]),a(p,{message:i.value.name},null,8,["message"])]),e("div",H,[a(v,{value:"メールアドレス"}),a(c,{type:"text",class:"mt-1 block w-full sm:w-96",modelValue:s.value.email,"onUpdate:modelValue":o[1]||(o[1]=t=>s.value.email=t),autocomplete:"email"},null,8,["modelValue"]),a(p,{message:i.value.email},null,8,["message"])]),g.value?(r(),u("div",J,[e("label",null,[b(e("input",{type:"checkbox","onUpdate:modelValue":o[2]||(o[2]=t=>s.value.has_password=t),class:"mr-1"},null,512),[[k,s.value.has_password]]),K])])):w("",!0),s.value.has_password?(r(),u("div",Q,[e("div",W,[e("div",X,[e("div",null,[a(v,{value:"パスワード",class:"mr-3"})]),e("div",ee,[e("a",{class:"text-indigo-500 hover:underline text-sm",href:"#",onClick:$(L,["prevent"])},"自動生成する")])]),a(c,{type:"password",class:"mt-1 block w-96",modelValue:s.value.password,"onUpdate:modelValue":o[3]||(o[3]=t=>s.value.password=t),autocomplete:"email"},null,8,["modelValue"]),a(p,{message:i.value.password},null,8,["message"]),e("small",null," 例： "+T(U.value),1)]),e("div",se,[a(v,{value:"パスワード（確認）",class:"mr-1"}),a(c,{type:"password",class:"mt-1 block w-96",modelValue:s.value.password_confirmation,"onUpdate:modelValue":o[4]||(o[4]=t=>s.value.password_confirmation=t),autocomplete:"email"},null,8,["modelValue"]),a(p,{message:i.value.password},null,8,["message"])]),e("div",null,[e("label",null,[b(e("input",{type:"checkbox","onUpdate:modelValue":o[5]||(o[5]=t=>s.value.has_notification=t),class:"mr-1"},null,512),[[k,s.value.has_notification]]),ae])])])):w("",!0)])])])]),a(j,{onYesClick:M,onNoClick:x},{left:m(()=>[a(z,{size:"md",href:l.route("admin.shop.input"),onClick:x},{default:m(()=>[E("新規追加")]),_:1},8,["href"])]),_:1}),d.value?(r(),u("div",oe,[a(D,{show:d.value},null,8,["show"])])):w("",!0)]),_:1})],64))}};export{he as default};
